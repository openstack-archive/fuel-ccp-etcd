dsl_version: 0.4.0
service:
  name: etcd
  ports:
    - {{ etcd.client_port }}
    - {{ etcd.server_port }}
  annotations:
    service:
      prometheus.io/port: "{{ etcd.client_port.cont }}"
      prometheus.io/scrape: "true"
  containers:
    - name: etcd
      image: etcd
      daemon:
        command: etcd --listen-client-urls http://0.0.0.0:{{ etcd.client_port.cont }}
                      --advertise-client-urls {{ address("etcd", etcd.client_port, with_scheme=True) }}
